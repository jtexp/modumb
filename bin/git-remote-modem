#!/bin/sh
# Git remote helper for modem:// URLs
# Cross-platform wrapper that calls the Python module

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"

# Try Windows venv first, then Unix venv, then system Python
if [ -f "$PROJECT_DIR/.venv/Scripts/python.exe" ]; then
    PYTHON="$PROJECT_DIR/.venv/Scripts/python.exe"
elif [ -f "$PROJECT_DIR/.venv/bin/python" ]; then
    PYTHON="$PROJECT_DIR/.venv/bin/python"
else
    PYTHON="python3"
fi

# Add src to PYTHONPATH for development installs
export PYTHONPATH="$PROJECT_DIR/src:$PYTHONPATH"

exec "$PYTHON" -m modumb.git.remote_helper "$@"
